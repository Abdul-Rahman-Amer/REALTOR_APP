<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Page</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>

    <style>
        /* Basic styling for the page */
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
        }

        /* Styling for the vertical navbar */
        .navbar {
            width: 100px; /* Adjust the width as needed */
            background-color: #333; /* Navbar background color */
            height: 100%; /* Make the navbar the full height of the page */
            position: fixed; /* Fixed position on the left side */
            left: 0;
            top: 0;
            overflow-x: hidden; /* Hide horizontal scrollbar */
            display: flex;
            flex-direction: column;
        }

        /* Styling for the navbar items */
        .navbar-item {
            text-align: center;
            padding: 20px 0;
            color: white;
            text-decoration: none;
        }



.hover-text {
  opacity: 0;
  transition: opacity 0.3s ease-in-out;
}

.navbar-item:hover .hover-text {
  opacity: 1;
}


        /* Styling for the icons */
        .icon {
            font-size: 24px;
            margin-bottom: 10px;
        }

        /* Styling for the main content area */
        .content {
            margin-left: 100px;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        /* Styling for the table */
        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
        }

        th {
            background-color: #333;
            color: white;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        /* Styling for the contact form */
        .contact-form {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            font-weight: bold;
            display: block;
        }

        input[type="text"],
        input[type="email"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .btn {
            background-color: #333;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .btn:hover {
            background-color: #555;
        }

        /* Styling for the custom modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: #fff;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 50%;
            border-radius: 10px;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        }

        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close-button:hover {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        /* Add this CSS to your existing styles in the head of your HTML document */

/* Styling for the employee cards */
.employee-cards {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
}

.employee-card {
    background-color: #ffffff;
    border: 1px solid #ccc;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
    width: calc(33.33% - 20px); /* Adjust card width as needed */
    margin-bottom: 20px;
    box-sizing: border-box;
}

/* Styling for employee details */
.employee-details {
    font-weight: bold;
}

.employee-details h3 {
    margin: 0;
}

/* Styling for employee actions */
.employee-actions {
    margin-top: 10px;
    display: flex;
    justify-content: space-between;
}

.employee-actions .icon {
    font-size: 20px;
}

/* Styling for the remove button */
.remove-button .icon {
    color: #ff0000; /* Red color for remove button */
    cursor: pointer;
}

    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script>
</head>
<body>
    <!-- Vertical Navbar -->
    <div class="navbar">
        <!-- Email Icon -->
        <a href="/" class="navbar-item">
            <div class="icon">üè†</div>
            <span class="hover-text">Home</span>
        </a>
        <a href="/mass_email" class="navbar-item">
            <div class="icon">‚úâÔ∏è</div>
            <span class="hover-text">Send Mass Emails</span>
        </a>
        <!-- SMS Icon -->
        <a href="/mass_sms" class="navbar-item">
            <div class="icon">üì±</div>
            <span class="hover-text">Send Mass SMS</span>
        </a>
        <!-- Contacts Icon -->
        <a href="/" class="navbar-item">
            <div class="icon">üìá</div>
            <span class="hover-text">Manage Contacts</span>
        </a>
        <!-- Random Icons (You can replace these with actual icons) -->
        <a href="/insights" class="navbar-item">
            <div class="icon">üîç</div>
            <span class="hover-text">Insights</span>
        </a>
        <a href="/manage_finances" class="navbar-item">
            <div class="icon">üìâ</div>
            <span class="hover-text">Manage Spending</span>
        </a>
        <a href="/employees" class="navbar-item">
            <div class="icon">üë®‚Äçüíº</div>
            <span class="hover-text">Manage Employees</span>
        </a>
        <a href="/payroll" class="navbar-item">
            <div class="icon">üí∞</div>
            <span class="hover-text">Payroll</span>
        </a>
        <a href="/calendar" class="navbar-item">
            <div class="icon"> üìÖ</div>
            <span class="hover-text">Schedule Events</span>
        </a>
        <a href="#" class="navbar-item">
            <div class="icon">‚öôÔ∏è</div>
            <span class="hover-text">Settings</span>
        </a>
    </div>
    <!-- Main content area -->
    <div class="content">
        <!-- Your main content goes here -->
        <h1>Insights</h1>
        <div style="display: flex;">
            <!-- Employee Pie Chart Container -->
            <div class="chart-container">
               
                <canvas id="employeePieChart"></canvas>
            </div>
        
            <!-- Earnings Line Chart Container -->
            <div class="chart-container">
             
                <canvas id="earningsLineChart" width="400" height="500"></canvas>
                <div class="total-earnings">
                    <h2>TOTAL EARNINGS</h2>
                    <h3 id="totalEarnings">$0.00</h3>
                </div>
            </div>
        </div>
        
        <style>
            /* Container Styles */
            .chart-container {
                flex: 1;
                padding: 20px;
                background-color: #fff;
                border: 1px solid #ccc;
                border-radius: 10px;
                box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
                transition: transform 0.2s ease-in-out;
                margin-right: 20px;
            }
        
            /* Hover Effect */
            .chart-container:hover {
                transform: scale(1.05);
            }
        
            /* Total Earnings Styles */
            .total-earnings {
                text-align: center;
                margin-top: 20px;
            }
        </style>

        <script>
            // Parse the JSON data passed from Flask
            var employeeData = {{ employee_json | tojson | safe }};
            
            // Loop through the data and extract names and earnings
            var employeeNames = [];
            var earnings = [];
            
            for (var i = 0; i < employeeData.length; i++) {
                var name = employeeData[i].name;
                var sales = employeeData[i]['Total Sales'];
                employeeNames.push(name);
                earnings.push(sales);
            }
        
            // Dynamically generate colors
            var dynamicColors = function() {
                var colors = [];
                for (var i = 0; i < employeeNames.length; i++) {
                    var r = Math.floor(Math.random() * 255);
                    var g = Math.floor(Math.random() * 255);
                    var b = Math.floor(Math.random() * 255);
                    colors.push(`rgba(${r}, ${g}, ${b}, 0.7)`);
                }
                return colors;
            };
        
            // Create a pie chart
            var ctx = document.getElementById('employeePieChart').getContext('2d');
            var pieChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: employeeNames,
                    datasets: [{
                        data: earnings,
                        backgroundColor: dynamicColors(),
                        borderColor: dynamicColors(),
                        borderWidth: 1,
                    }],
                },
                options: {
                    legend: {
                        position: 'right',
                        align: 'start',
                        labels: {
                            boxWidth: 20,
                        },
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Employee Sales Distribution YTD',
                            padding: {
                                top: 10,
                                bottom: 20,
                            },
                        },
                    },
                    tooltips: {
                        callbacks: {
                            label: function(tooltipItem, data) {
                                var label = data.labels[tooltipItem.index] || '';
                                var value = data.datasets[0].data[tooltipItem.index];
                                return label + ': $' + value.toFixed(2);
                            }
                        }
                    },
                },
            });
        </script>

        
<script>
    // Dummy data for earnings the last 30 days
    var days = [];
    var earningsData = [];

    for (var i = 29; i >= 0; i--) {
        var date = new Date();
        date.setDate(date.getDate() - i);
        var formattedDate = date.toLocaleDateString();
        days.push(formattedDate);
        earningsData.push(parseFloat((Math.random() * 1000).toFixed(2))); // Random earnings for each day
    }

    // Create a line chart for earnings
    var ctx = document.getElementById('earningsLineChart').getContext('2d');
    var lineChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: days,
            datasets: [{
                label: 'Earnings per Day',
                data: earningsData,
                fill: false,
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 2,
            }],
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Earnings ($)',
                    },
                },
                x: {
                    title: {
                        display: true,
                        text: 'Date',
                    },
                },
            },
            plugins: {
                legend: {
                    display: false, // Hide the legend
                },
                title: {
                    display: true,
                    text: 'Earnings Over the Last 30 Days',
                },
            },
        },
    });

    // Calculate and display the total earnings
    var totalEarnings = earningsData.reduce(function(a, b) {
        return a + b;
    }, 0);
    document.getElementById('totalEarnings').textContent = '$' + totalEarnings.toFixed(2);
</script>
        
        
        

</div>

</body>
</html>

